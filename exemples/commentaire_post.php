<?php
	$valid = $validErr = "";
	$_POST['login'] = $auteur;

	if(isset($_POST['valider'])) {
       
	    function verif_champvide(){
	    	$champs_vide=array();
	         
		    if (empty($_POST['commentaire'])){
		         $champs_vide[]='"commentaire"';
		    }
		     
			if (empty ($champs_vide)) {      
			         
			      $commentaire=$_POST['commentaire'];
			      return true;

			} else {
			  return false;
			}    
	    }

	    if (verif_champvide()==true)  {

		    try
				{
				$bdd = new PDO('mysql:host=localhost;dbname=espace_membre;charset=utf8', 'root', '');
				}
			catch(Exception $e)
			    {
				die('Erreur : '.$e->getMessage());
				};

		    $req = $bdd->prepare('INSERT INTO commentaire(message) VALUES(?)');
		    $req->execute(array($_POST['commentaire']));

		    $valid = "le message a été enregistré";
		    header('Location: Page_interaction.php');
	   
    	} else {

    		if (verif_champvide()==false) {
        	$validErr = "Le formulaire est incomplet";
        	header('Location: Page_interaction.php');   
			}
    	}
    }
?>  